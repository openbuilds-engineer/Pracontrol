module.exports = class Update extends WebComponentAbstract {
  init() {
    this.checkForUpdate()
    
    self.emit('newPanel', { el: this, position: 'bottom' })
  }
  
  checkForUpdate() {
    var url = 'https://raw.githubusercontent.com/pravdomil/pracontrol/master/package.json'
  
    require('request')(url, (e, res, body) => {
      if(e) return
      
      var ver = JSON.parse(body).version
      if(ver == app.package.version) return
      
      this.innerHTML = `<small><a href="${app.package.homepage}">New version ${ver} available!</a></small>`
    })
  }
}
