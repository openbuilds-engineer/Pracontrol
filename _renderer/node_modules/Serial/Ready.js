module.exports = class SerialReady extends WebComponentAbstract {
  init() {
    defineEvent('deviceReady', 'Device is communicating, listen only', 'Serial buffer')
    defineEvent('deviceNotReady', 'Device is not communicating, listen only', 'Serial buffer')
    
    self.on('deviceReady', e => this.deviceReady = true)
    self.on('deviceNotReady', e => this.deviceReady = false)
    self.on('disconnected', e => self.emit('deviceNotReady'))
    
    self.on('connected', e => self.emit('serialDirectWrite', { data: 'G4\n' }) )
    self.on('serialData', e => !this.deviceReady && self.emit('deviceReady'))
  }
}
