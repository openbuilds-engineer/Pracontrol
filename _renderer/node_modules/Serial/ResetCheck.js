module.exports = class ResetCheck extends WebComponentAbstract {
  init() {
    defineEvent('deviceReset', 'Device was reseted, listen only', 'Serial buffer')
    self.on('deviceReset', e => self.emit('msg', 'device was reseted'))
    
    self.on('disconnected', e => this.deviceStarted = false)
    self.on('serialData', e => e.detail.data == 'start\r' && this.startReceived())
  }
  
  startReceived(e) {
    if(this.deviceStarted) self.emit('deviceReset')
    this.deviceStarted = true
  }
}
