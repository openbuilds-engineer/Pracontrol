module.exports = class StartCheck extends WebComponentAbstract {
  init() {
    defineEvent('deviceReset', 'Device was reseted, listen only', 'Serial buffer')
    self.on('disconnected', e => this.deviceStarted = false)
    self.on('serialData', e => this.checkStart(e))
    self.on('deviceReset', e => self.emit('msg', 'device was reseted'))
  }
  
  checkStart(e) {
    if(e.detail.data == 'start\r') {
      if(this.deviceStarted) self.emit('deviceReset')
      this.deviceStarted = true
    }
  }
}
