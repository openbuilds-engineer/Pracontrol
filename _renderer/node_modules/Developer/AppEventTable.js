module.exports = class AppEventTable extends WebComponentAbstract {
  
  initCallback() {
    defineAppEvent('defineAppEvent', 'Add new event to this table', 'Developer', "{ name: '', desc: '', cat: '', arg: '' }")
    self.on('defineAppEvent', e => this.defineAppEvent(e.d))
    
    this.newElem('h1').textContent = 'App events'
    this.table = this.newElem('table')
  }
  
  defineAppEvent(e) {
    var tbody = this.querySelector(`tbody[cat='${e.cat}']`)
    
    if(!tbody) {
      var thead = this.table.newElem('thead')
      
      var tr = thead.newElem('tr')
      var th = tr.newElem('th', true, { colSpan: 2, textContent: e.cat })
      
      tbody = this.table.insertAfter(this.newElem('tbody', false), thead)
      tbody.setAttribute('cat', e.cat)
    }
    
    var tr = tbody.newElem('tr')
    tr.newElem('td').textContent = e.name
    tr.newElem('td').textContent = e.desc
    tr.newElem('td').textContent = e.arg
  }
}
