module.exports = class AppEventTable extends WebComponentAbstract {
  
  init() {
    defineEvent('defineEvent', 'Add new event to this table', 'Developer', "{ name: '', desc: '', cat: '', arg: '' }")
    self.on('defineEvent', e => this.defineEvent(e.detail))
    
    this.new('h1').textContent = 'App events'
    this.table = this.new('table')
  }
  
  defineEvent(e) {
    var tbody = this.querySelector(`tbody[cat='${e.cat}']`)
    
    if(!tbody) {
      var thead = this.table.new('thead')
      
      var tr = thead.new('tr')
      var th = tr.new('th', true, { colSpan: 2, textContent: e.cat })
      
      tbody = this.table.insertAfter(this.new('tbody', false), thead)
      tbody.setAttribute('cat', e.cat)
    }
    
    var tr = tbody.new('tr')
    tr.new('td').textContent = e.name
    tr.new('td').textContent = e.desc
    tr.new('td').textContent = e.arg
  }
}
