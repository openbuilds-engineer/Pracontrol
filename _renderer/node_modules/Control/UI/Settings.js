module.exports = class Settings extends WebComponentAbstract {
  init() {
    var p = this.new('p', { textContent: 'Revert ' })
    p.new('a', { textContent: 'Saved settings', className: 'button', tabIndex: 0 }).on('click', e => this.send('M501'))
    p.newText(' ')
    p.new('a', { textContent: 'Factory default', className: 'button', tabIndex: 0 }).on('click', e => this.send('M502'))
    
    var p = this.new('p', { textContent: 'Current settings ' })
    p.new('a', { textContent: 'Save', className: 'button', tabIndex: 0 }).on('click', e => this.send('M500'))
    p.newText(' ')
    p.new('a', { textContent: 'Read', className: 'button', tabIndex: 0 }).on('click', e => this.send('M503'))
    
    self.on('serialEcho', e => this.echo(e.detail))
  }
  
  send(val) {
    self.emit('serialWrite', { data: val, prepend: true })
  }
  
  echo(msg) {
    if(msg.startsWith('Settings Stored')) self.emit('msg', 'Settings saved')
  }
}
