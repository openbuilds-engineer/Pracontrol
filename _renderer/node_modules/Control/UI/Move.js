var style = `
::content label { white-space: nowrap; }
::content input[type='number'] { width: 5rem; }
`

module.exports = class Move extends WebComponentAbstract {
  initCallback() {
    this.renderCss(style)
    
    var p = this.newElem('p')
    
    var opt = { type: 'number', step: 1, value: 0 }
    var X = p.newElem('label', true, { textContent: 'X '}).newElem('input', true, opt)
    X.on('input', e => this.move({ X: X.value }))
    p.newText(' ')
    
    var Y = p.newElem('label', true, { textContent: 'Y '}).newElem('input', true, opt)
    Y.on('input', e => this.move({ Y: Y.value }))
    p.newElem('br')
    
    opt.step *= .1
    
    var Z = p.newElem('label', true, { textContent: 'Z '}).newElem('input', true, opt)
    Z.on('input', e => this.move({ Z: Z.value }))
    p.newText(' ')
    
    var E = p.newElem('label', true, { textContent: 'E '}).newElem('input', true, opt)
    E.on('input', e => this.move({ E: E.value }))
  }
  
  move(val) {
    var gCode = 'G1 '
    Object.keys(val).forEach(k => gCode += `${k}${val[k]} ` )
    AppEvent('serialWrite', { data: gCode, prepend: true })
  }
}
